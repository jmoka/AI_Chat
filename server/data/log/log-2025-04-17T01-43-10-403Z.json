[
  {
    "role": "user",
    "content": "<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>Chat com API</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  <script src=\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\"></script>\n  <style>\n    * {\n      box-sizing: border-box;\n    }\n\n    body {\n      font-family: Arial, sans-serif;\n      margin: 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 100vh;\n    }\n\n    #chatContainer {\n      width: 60%;\n      height: 100vh;\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n      background-color: rgb(134, 134, 83);\n\n    }\n    #menuContainer {\n      width: 100px;\n      height: 100vh;\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n      background-color: rgb(184, 9, 9);\n    }\n\n    #chat {\n      flex: 1;\n      overflow-y: auto;\n      padding: 20px;\n    }\n\n    .msg {\n      margin: 10px 0;\n      padding: 10px 15px;\n      line-height: 1.5;\n      border-radius: 10px;\n      max-width: 100%;\n      background-color: rgb(251, 254, 254);\n      overflow: auto;\n      word-wrap: break-word;\n      overflow-wrap: break-word;\n      word-break: break-word;\n      white-space: pre-wrap;\n      border: #000000 solid  2px;\n    }\n    \n    /* Markdown + código */\n    .msg code, .msg pre {\n      white-space: pre-wrap;\n      word-break: break-word;\n      overflow-x: auto;\n      max-width: 100%;\n      font-family: monospace;\n      background-color: #bdb8b8;\n      padding: 5px;\n      border-radius: 6px;\n    }\n    \n\n    .user {\n      align-self: flex-start;\n      background-color: rgb(251, 253, 254);\n      text-align: start;\n      max-width: 75%;\n      margin-right: 10%;\n      \n      margin: 15px;\n    }\n\n    .assistant {\n      align-self: flex-end;\n      background-color: #f3f3f3;\n      text-align: start;\n      max-width: 75%;\n      \n      \n    }\n\n    /* Markdown */\n    .msg h1, .msg h2, .msg h3, .msg h4, .msg h5, .msg h6 {\n      margin-top: 0px;\n      margin-bottom: 1px;\n      font-weight: bold;\n    }\n\n    .msg p {\n      margin: 1px 0;\n      margin-bottom: 0.5px;\n    }\n\n    .msg ul {\n      padding-left: 15px;\n      margin: 1px 0;\n    }\n\n    .msg li {\n      margin-bottom: 1px;\n    }\n\n    #form {\n      display: flex;\n      flex-direction: column;\n      padding: 1px;\n    }\n\n    #messageInput {\n      width: 100%;\n      height: 70px;\n      padding: 10px;\n      font-size: 16px;\n      resize: vertical;\n      border-radius: 8px;\n    }\n\n    #sendButton {\n      background-color: #0644df;\n      color: white;\n      border: none;\n      cursor: pointer;\n      padding: 8px 14px;\n      font-size: 14px;\n      border-radius: 6px;\n      margin-bottom: 10px;\n      \n    }\n\n    #sendButton:hover {\n      background-color: #0056b3;\n    }\n\n    .botoes button {\n      background-color: #f73105;\n      color: white;\n      border: none;\n      cursor: pointer;\n      padding: 8px 14px;\n      font-size: 14px;\n      border-radius: 6px;\n      margin-right: 10px;\n      margin-bottom: 10px;\n    }\n\n    .botoes button:hover {\n      background-color: #c62828;\n    }\n\n    .botoes {\n      width: 100%;\n      display: flex;\n      gap: 10px;\n      margin-top: 10px;\n      justify-content: flex-end;\n    }\n\n    @media (max-width: 600px) {\n\n      #messageInput {\n        width: 95%;\n        height: 70px;\n        padding: 10px;\n        font-size: 16px;\n        resize: vertical;\n        border-radius: 8px;\n        align-self: center;\n        \n        \n      }\n\n      #menuContainer {\n       display: none;\n      }\n  \n      #chatContainer {\n        width: 100%;\n        height: 100%;\n        \n      }\n\n      .assistant {\n        max-width: 100%;\n        margin: 0;\n        margin-top: 15px;\n        margin-bottom: 15px;\n      }\n\n      .user {\n        max-width: 100%;\n        margin: 0;\n        margin-top: 15px;\n        margin-bottom: 15px;\n      }\n    }\n  </style>\n</head>\n<body>\n  <div>\n    \n  </div>\n  <div id=\"menuContainer\">teste</div>\n  <br>\n  <div id=\"chatContainer\">\n   \n    <div id=\"chat\"></div>\n\n    <form id=\"form\">\n      <br>\n      <textarea  id=\"messageInput\" placeholder=\"Digite sua mensagem...\" required ></textarea>\n      <div class=\"botoes\">\n        <button type=\"submit\" id=\"sendButton\">Enviar</button>\n        <button onclick=\"apagar()\" type=\"button\" id=\"botoes\">Limpar</button>\n       \n      </div>\n    </form>\n  </div>\n\n  <script>\n    const chat = document.getElementById(\"chat\");\n    const form = document.getElementById(\"form\");\n    const input = document.getElementById(\"messageInput\");\n    const msg = document.getElementsByClassName(\"msg\");\n      \n\n    // Recupera mensagens salvas ao iniciar\n    window.addEventListener(\"DOMContentLoaded\", () => {\n      const historico = JSON.parse(localStorage.getItem(\"chatHistorico\")) || [];\n      historico.forEach(mensagem => {\n        adicionarMensagem(mensagem.origem, mensagem.texto, mensagem.classe);\n      });\n    });\n\n   \n    // Limpa tudo (localStorage + tela)\n    function apagar() {\n      localStorage.removeItem(\"chatHistorico\");\n      chat.innerHTML = \"\";\n      console.log(\"Histórico de mensagens apagado.\");\n    }\n    \n    // Adicionando estilo\n    apagar.style = `\n      .msg {\n        border: #000000 solid 5px;\n      }\n    `;\n\n\n    // Salva mensagem no localStorage\n    function salvarMensagem(origem, texto, classe) {\n      const historico = JSON.parse(localStorage.getItem(\"chatHistorico\")) || [];\n      historico.push({ origem, texto, classe });\n      localStorage.setItem(\"chatHistorico\", JSON.stringify(historico));\n    }\n\n    async function enviarMensagem() {\n      const mensagem = input.value.trim();\n      if (!mensagem) return;\n\n      adicionarMensagem(\"Você\", mensagem, \"user\");\n      salvarMensagem(\"Você\", mensagem, \"user\");\n      input.value = \"\";\n\n      try {\n        const resposta = await fetch(\"http://127.0.0.1/api/chat\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            mensagem: mensagem,\n            orientacao: \"\",\n            modelo: 8\n          })\n        });\n\n        const dados = await resposta.json();\n        const textoIA = dados.resposta || \"(sem resposta)\";\n        adicionarMensagem(\"IA\", textoIA, \"assistant\");\n        salvarMensagem(\"IA\", textoIA, \"assistant\");\n\n      } catch (erro) {\n        console.error(\"Erro:\", erro);\n        const erroMsg = \"❌ Erro ao se comunicar com a API.\";\n        adicionarMensagem(\"IA\", erroMsg, \"assistant\");\n        salvarMensagem(\"IA\", erroMsg, \"assistant\");\n      }\n    }\n\n    function adicionarMensagem(origem, texto, classe) {\n      const msgDiv = document.createElement(\"div\");\n      msgDiv.classList.add(\"msg\", classe);\n      msgDiv.innerHTML = marked.parse(texto); // Markdown -> HTML\n      chat.appendChild(msgDiv);\n      chat.scrollTop = chat.scrollHeight;\n    }\n\n    form.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      enviarMensagem();\n    });\n\n    // Envia com Enter\n    input.addEventListener(\"keypress\", (e) => {\n      if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault();\n        enviarMensagem();\n      }\n    });\n  </script>\n</body>\n</html>\n\ncorrija para que quando apertar em apagar , fique uma bordar fina no container principal das mensagens"
  },
  {
    "role": "assistant",
    "content": "# Corrigindo o Código\n\n## Mudanças Necessárias\n\n- A borda fina deve ser aplicada ao container principal das mensagens, que é o elemento com a classe `chat`;\n- A borda fina deve ser aplicada apenas quando o botão \"Limpar\" é clicado.\n\n## Código Corrigido\n\n```javascript\nfunction apagar() {\n  localStorage.removeItem(\"chatHistorico\");\n  chat.innerHTML = \"\";\n  console.log(\"Histórico de mensagens apagado.\");\n  chat.style.border = \"1px solid #000\"; // Adicionando borda fina\n}\n\n// Salva mensagem no localStorage\nfunction salvarMensagem(origem, texto, classe) {\n  const historico = JSON.parse(localStorage.getItem(\"chatHistorico\")) || [];\n  historico.push({ origem, texto, classe });\n  localStorage.setItem(\"chatHistorico\", JSON.stringify(historico));\n}\n\n// Adicionando estilo\napagar.style = `\n  .msg {\n    border: #000000 solid 5px;\n  }\n  #chat {\n    border: 1px solid #000; // Adicionando borda fina ao container principal\n  }\n`;\n```\n\n## Explicação\n\n- A borda fina é adicionada ao elemento `chat` apenas quando o botão \"Limpar\" é clicado, pois a borda é definida no método `apagar()`.\n- A borda fina é definida como uma linha simples (`1px solid #000`) para que seja fina e não confunda com a borda grossa definida para as mensagens individuais."
  }
]